<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skill-Based Gradebook</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }
        .score-select {
            width: 100%;
            padding: 5px;
            border: none;
            font-size: 14px;
        }
        .score-4 {
            background-color: #00c5ff;
        }
        .score-3 {
            background-color: #00ff04;
        }
        .score-2 {
            background-color: #fdff00;
        }
        .score-1 {
            background-color: #ff1837;
        }
        .chart-container {
            width: 100%;
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }
        canvas {
            margin: 10px;
        }
    </style>
</head>
<body>
    <h1>Skill-Based Gradebook</h1>

    <table id="gradebook">
        <thead>
            <tr>
                <th>Student</th>
                <th>Skill 1</th>
                <th>Skill 2</th>
                <th>Skill 3</th>
                <th>Overall Proficiency</th>
            </tr>
        </thead>
        <tbody>
            <!-- Sample students -->
            <tr>
                <td>Student 1</td>
                <td><select class="score-select score-4" data-skill="1"><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option></select></td>
                <td><select class="score-select score-3" data-skill="2"><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option></select></td>
                <td><select class="score-select score-2" data-skill="3"><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option></select></td>
                <td id="student1-overall">3.0</td>
            </tr>
            <tr>
                <td>Student 2</td>
                <td><select class="score-select score-2" data-skill="1"><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option></select></td>
                <td><select class="score-select score-4" data-skill="2"><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option></select></td>
                <td><select class="score-select score-1" data-skill="3"><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option></select></td>
                <td id="student2-overall">2.3</td>
            </tr>
        </tbody>
    </table>

    <div class="chart-container">
        <canvas id="skill1Chart"></canvas>
        <canvas id="skill2Chart"></canvas>
        <canvas id="skill3Chart"></canvas>
    </div>

    <!-- Include Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Calculate overall proficiency
        const calculateProficiency = () => {
            const rows = document.querySelectorAll("tbody tr");
            rows.forEach((row, index) => {
                let totalScore = 0;
                const selects = row.querySelectorAll("select");
                selects.forEach(select => {
                    totalScore += parseInt(select.value);
                });
                const average = (totalScore / selects.length).toFixed(1);
                document.getElementById(`student${index + 1}-overall`).textContent = average;
            });
        };

        // Update chart data
        const updateChartData = (chart, skillIndex) => {
            const counts = [0, 0, 0, 0]; // 4 proficiency levels
            const selects = document.querySelectorAll(`select[data-skill="${skillIndex}"]`);
            selects.forEach(select => {
                counts[4 - select.value]++;
            });
            chart.data.datasets[0].data = counts;
            chart.update();
        };

        // Chart.js setup for each skill
        const skill1Chart = new Chart(document.getElementById("skill1Chart").getContext('2d'), {
            type: 'doughnut',
            data: {
                labels: ['4', '3', '2', '1'],
                datasets: [{
                    label: 'Skill 1',
                    data: [0, 0, 0, 0],
                    backgroundColor: ['#00c5ff', '#00ff04', '#fdff00', '#ff1837']
                }]
            },
            options: {
                responsive: false,
                maintainAspectRatio: false
            }
        });

        const skill2Chart = new Chart(document.getElementById("skill2Chart").getContext('2d'), {
            type: 'doughnut',
            data: {
                labels: ['4', '3', '2', '1'],
                datasets: [{
                    label: 'Skill 2',
                    data: [0, 0, 0, 0],
                    backgroundColor: ['#00c5ff', '#00ff04', '#fdff00', '#ff1837']
                }]
            },
            options: {
                responsive: false,
                maintainAspectRatio: false
            }
        });

        const skill3Chart = new Chart(document.getElementById("skill3Chart").getContext('2d'), {
            type: 'doughnut',
            data: {
                labels: ['4', '3', '2', '1'],
                datasets: [{
                    label: 'Skill 3',
                    data: [0, 0, 0, 0],
                    backgroundColor: ['#00c5ff', '#00ff04', '#fdff00', '#ff1837']
                }]
            },
            options: {
                responsive: false,
                maintainAspectRatio: false
            }
        });

        // Update overall proficiency and charts on score change
        document.querySelectorAll('.score-select').forEach(select => {
            select.addEventListener('change', () => {
                calculateProficiency();
                updateChartData(skill1Chart, 1);
                updateChartData(skill2Chart, 2);
                updateChartData(skill3Chart, 3);
            });
        });

        // Initial chart and proficiency calculation
        calculateProficiency();
        updateChartData(skill1Chart, 1);
        updateChartData(skill2Chart, 2);
        updateChartData(skill3Chart, 3);
    </script>
</body>
</html>
